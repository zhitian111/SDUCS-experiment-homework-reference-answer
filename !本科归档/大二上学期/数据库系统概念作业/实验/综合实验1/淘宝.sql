USE FOR_HOME_WORK;
GO

CREATE SCHEMA [TAOBAO] AUTHORIZATION DBO;
GO

CREATE TABLE TAOBAO.[BRAND] (
    BID INT PRIMARY KEY,
    NAME VARCHAR(100),
    ADDRESS VARCHAR(100),
    TELEPHONE VARCHAR(20)
);
GO

CREATE TABLE TAOBAO.[COMMODITY] (
    CID INT PRIMARY KEY,
    NAME VARCHAR(100),
    TYPE INT,
    BRAND INT,
    GUARANTEE_PERIOD DATE,
    FOREIGN KEY (BRAND) REFERENCES TAOBAO.BRAND(BID)
);
GO

CREATE TABLE TAOBAO.[BATCH](
    BATCHID INT,
    MAN_DATE DATE,
    REF_PRICE FLOAT,
    CID INT,
    PRIMARY KEY(CID,BATCHID),
    FOREIGN KEY(CID) REFERENCES TAOBAO.COMMODITY(CID)
);
GO

CREATE TABLE TAOBAO.[STORES](
    SID INT PRIMARY KEY,
    NAME VARCHAR(100),
    LEVEL INT
);
GO

CREATE TABLE TAOBAO.[USER](
    UID INT PRIMARY KEY,
    NAME VARCHAR(100),
    ADDRESS VARCHAR(100),
    TELEPHONE VARCHAR(20),
    GENDER VARCHAR(10)
);
GO

CREATE TABLE TAOBAO.[ONSELL](
    CID INT,
    BATCHID INT,
    PRICE FLOAT,
    ONSELL_DATE DATE,
    STATUS VARCHAR(10),
    REM_AMOUNT INT,
    PRIMARY KEY(CID, BATCHID),
    FOREIGN KEY(CID) REFERENCES TAOBAO.COMMODITY(CID),
    FOREIGN KEY(CID,BATCHID) REFERENCES TAOBAO.BATCH(CID,BATCHID)
);
GO

CREATE TABLE TAOBAO.[ORDERS](
    OID INT PRIMARY KEY,
    SID INT,
    UID INT,
    BATCHID INT,
    CID INT,
    SOLD_TIME DATE,
    STATUS VARCHAR(10),
    BUYER_RATE INT NULL,
    FOREIGN KEY(UID) REFERENCES TAOBAO.[USER](UID),
    FOREIGN KEY(CID, BATCHID) REFERENCES TAOBAO.BATCH(CID, BATCHID),
    FOREIGN KEY(CID) REFERENCES TAOBAO.COMMODITY(CID),
    FOREIGN KEY(SID) REFERENCES TAOBAO.STORES(SID)
);
GO