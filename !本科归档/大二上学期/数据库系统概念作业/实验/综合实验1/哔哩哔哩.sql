USE FOR_HOME_WORK;
GO

CREATE SCHEMA BILIBILI AUTHORIZATION "dbo";
GO

CREATE TABLE BILIBILI."USER"(
    UID INT PRIMARY KEY,
    NICKNAME VARCHAR(20),
    GENDER VARCHAR(2),
    DATAOFBIRTH DATE,
    IDNUMBER VARCHAR(18),
    PROFILE VARCHAR(200),
    USERLEVEL INT
);
GO

CREATE TABLE BILIBILI."CONNECT"(
    F_UID INT,
    L_UID INT,
    CONNECT_TIME DATE,
    PRIMARY KEY (F_UID, L_UID),
    FOREIGN KEY (F_UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (L_UID) REFERENCES BILIBILI.[USER](UID)
);
GO

CREATE TABLE BILIBILI."VIDEO"(
    VID INT PRIMARY KEY,
    NAME VARCHAR(50),
    DESCRIPTION VARCHAR(200),
    CHANEL INT,
    CONTENT VARCHAR(500),
    FOREIGN KEY (CHANEL) REFERENCES BILIBILI.[USER](UID)
);
GO

CREATE TABLE BILIBILI."COIN"(
    UID INT,
    VID INT,
    TIME DATE,
    AMOUNT INT,
    PRIMARY KEY (UID, VID, TIME),
    FOREIGN KEY (UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (VID) REFERENCES BILIBILI.VIDEO(VID)
);
GO

CREATE TABLE BILIBILI."COMMENT"(
    UID INT,
    VID INT,
    POST_TIME DATE,
    COLOR INT,
    CONTENT VARCHAR(500),
    VIDEO_TIME DATE,
    PRIMARY KEY (UID, VID, POST_TIME),
    FOREIGN KEY (UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (VID) REFERENCES BILIBILI.VIDEO(VID)
);
GO

CREATE TABLE BILIBILI."LIKE"(
    UID INT,
    VID INT,
    TIME DATE,
    PRIMARY KEY (UID, VID),
    FOREIGN KEY (UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (VID) REFERENCES BILIBILI.VIDEO(VID)
);
GO

CREATE TABLE BILIBILI."COLLECT"(
    UID INT,
    VID INT,
    TIME DATE,
    PRIMARY KEY (UID, VID),
    FOREIGN KEY (UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (VID) REFERENCES BILIBILI.VIDEO(VID)
);
GO

CREATE TABLE BILIBILI."WATCH"(
    UID INT,
    VID INT,
    TIME DATE,
    DURATION INT,
    PRIMARY KEY (UID, VID),
    FOREIGN KEY (UID) REFERENCES BILIBILI.[USER](UID),
    FOREIGN KEY (VID) REFERENCES BILIBILI.VIDEO(VID)
);
GO
